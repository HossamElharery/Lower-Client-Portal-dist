"use strict";(self.webpackChunkClientPortal=self.webpackChunkClientPortal||[]).push([[165],{5862:(P,F,l)=>{l.d(F,{a:()=>C});var o=l(9862),v=l(553),e=l(5879);let C=(()=>{class A{constructor(i){this.http=i,this.clientsUrl=`${v.N.url}client`,this.allClientsUrl=`${v.N.url}client/get/all`}getClientsList(i){let f=new o.LE;return i&&Object.keys(i).forEach(h=>{f=f.append(h,i[h])}),this.http.get(this.clientsUrl,{params:f})}getAllClients(){return this.http.get(`${this.allClientsUrl}`)}getClientById(i){return this.http.get(`${this.clientsUrl}/${i}`)}deleteClient(i){return this.http.delete(`${this.clientsUrl}/${i}`)}addClient(i,f){let h=new o.LE;f&&Object.keys(f).forEach(c=>{h=h.append(c,f[c])});const q=new FormData;return Object.keys(i).forEach(c=>{const g=i[c];null!=g&&(Array.isArray(g)?g.forEach((d,_)=>{d instanceof File&&q.append(`files[avatar][${_}]`,d)}):q.append(c,g))}),this.http.post(this.clientsUrl,q,{params:h})}updateClient(i,f,h){let q=new o.LE;h&&Object.keys(h).forEach(g=>{q=q.append(g,h[g])});const c=new FormData;return Object.keys(f).forEach(g=>{const d=f[g];Array.isArray(d)?d.forEach((_,s)=>{_ instanceof File&&c.append(`files[avatar][${s}]`,_)}):c.append(g,d)}),this.http.post(`${this.clientsUrl}/${i}`,c,{params:q})}assignEmployee(i){return this.http.post(`${v.N.url}client-employee`,i)}static#e=this.\u0275fac=function(f){return new(f||A)(e.LFG(o.eN))};static#t=this.\u0275prov=e.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})()},7165:(P,F,l)=>{l.r(F),l.d(F,{default:()=>ne});var o=l(6814),v=l(846),e=l(5879);let C=(()=>{class r{static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-main-requests"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(u,n){1&u&&e._UZ(0,"router-outlet")},dependencies:[o.ez,v.lC]})}return r})();var A=l(4414),b=l(8733),i=l(6223),f=l(3222),h=l(4286),q=l(5828),c=l(5862),g=l(9862),d=l(553);let _=(()=>{class r{constructor(t){this.http=t,this.requestsUrl=`${d.N.url}requests`}getRequestList(t){let u=new g.LE;return t&&Object.keys(t).forEach(n=>{u=u.append(n,t[n])}),this.http.get(this.requestsUrl,{params:u})}getRequestById(t){return this.http.get(`${this.requestsUrl}/show?request_id=${t}`)}deleteRequest(t){return this.http.delete(`${this.requestsUrl}/destroy?request_id=${t}`)}addRequest(t,u){let n=new g.LE;u&&Object.keys(u).forEach(m=>{n=n.append(m,u[m])});const p=new FormData;return Object.keys(t).forEach(m=>{const Z=t[m];Array.isArray(Z)?Z.forEach((x,y)=>{x instanceof File&&p.append(`files[documents][${y}]`,x)}):p.append(m,Z)}),this.http.post(this.requestsUrl,p,{params:n})}updateRequest(t,u,n){let p=new g.LE;n&&Object.keys(n).forEach(Z=>{p=p.append(Z,n[Z])});const m=new FormData;return Object.keys(u).forEach(Z=>{const x=u[Z];Array.isArray(x)?x.forEach((y,ie)=>{y instanceof File&&m.append(`files[documents][${ie}]`,y)}):m.append(Z,x)}),this.http.post(`${this.requestsUrl}/update?request_id=${t}`,m,{params:p})}static#e=this.\u0275fac=function(u){return new(u||r)(e.LFG(g.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const s=["fileInput"];function T(r,a){1&r&&(e.TgZ(0,"h5"),e._uU(1,"\u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u062e\u062f\u0645\u0629"),e.qZA())}function U(r,a){1&r&&(e.TgZ(0,"h5"),e._uU(1,"\u062a\u0639\u062f\u064a\u0644 \u0637\u0644\u0628 \u062e\u062f\u0645\u0629"),e.qZA())}function J(r,a){if(1&r&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.user.name," ")}}function L(r,a){1&r&&(e.TgZ(0,"div",33),e._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),e.qZA())}function N(r,a){if(1&r&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.requestForm.controls.client_id.errors?null:t.requestForm.controls.client_id.errors.serverError[0]," ")}}function Q(r,a){if(1&r&&(e.TgZ(0,"div",33),e.YNc(1,L,2,0,"div",19),e.YNc(2,N,2,1,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.client_id.errors?null:t.requestForm.controls.client_id.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.client_id.errors?null:t.requestForm.controls.client_id.errors.serverError)}}function O(r,a){if(1&r&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function R(r,a){1&r&&(e.TgZ(0,"div",33),e._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),e.qZA())}function S(r,a){if(1&r&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.requestForm.controls.service_id.errors?null:t.requestForm.controls.service_id.errors.serverError[0]," ")}}function M(r,a){if(1&r&&(e.TgZ(0,"div",33),e.YNc(1,R,2,0,"div",19),e.YNc(2,S,2,1,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.service_id.errors?null:t.requestForm.controls.service_id.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.service_id.errors?null:t.requestForm.controls.service_id.errors.serverError)}}function Y(r,a){1&r&&(e.TgZ(0,"div",33),e._uU(1," \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "),e.qZA())}function D(r,a){if(1&r&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.requestForm.controls.notes.errors?null:t.requestForm.controls.notes.errors.serverError[0]," ")}}function k(r,a){if(1&r&&(e.TgZ(0,"div",33),e.YNc(1,Y,2,0,"div",19),e.YNc(2,D,2,1,"div",19),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.notes.errors?null:t.requestForm.controls.notes.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.requestForm.controls.notes.errors?null:t.requestForm.controls.notes.errors.serverError)}}function B(r,a){if(1&r&&(e.TgZ(0,"div",28),e._UZ(1,"input",35),e.TgZ(2,"a",36),e._uU(3,"\u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641"),e.qZA()()),2&r){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.original),e.xp6(1),e.Q6J("href",t.original,e.LSH)}}function $(r,a){if(1&r&&(e.ynx(0),e.YNc(1,B,4,2,"div",34),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.conversionUrls)}}function z(r,a){if(1&r&&(e.ynx(0),e.TgZ(1,"div",37)(2,"button",38),e._UZ(3,"i",39),e._uU(4," \u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u062e\u062f\u0645\u0629 "),e.qZA()(),e.BQk()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.requestForm.valid)}}function j(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",37)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateRequest())}),e._uU(2," \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0637\u0644\u0628 \u062e\u062f\u0645\u0629 "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.requestForm.valid)}}const H=function(r){return[r]};let E=(()=>{class r{constructor(t,u,n,p,m,Z,x){this.activatedRoute=t,this.localize=u,this._MessagesService=n,this.router=p,this.servicesService=m,this.clientsService=Z,this.requestService=x,this.isEditMode=!1,this.request="",this.clients=[],this.services=[],this.file=[],this.selectedFile=[],this.fileError=null,this.conversionUrls=[],this.requestForm=new i.cw({notes:new i.NI("",i.kI.required),client_id:new i.NI("",i.kI.required),service_id:new i.NI("",i.kI.required),files:new i.NI([])})}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const u=t.get("id");u&&(this.isEditMode=!0,this.request=u,this.requestService.getRequestById(u).subscribe(n=>{n&&n.data&&this.setFormValues(n.data)}))}),this.getListClients(),this.getListServices()}navigateToRequestList(){const t=this.localize.translateRoute("/dashboard/requests");this.router.navigate([t])}onFilesSelected(t){const u=Array.from(t.target.files),n=this.requestForm.get("files")?.value||[];this.requestForm.get("files")?.setValue([...n,...u])}discardFiles(){this.requestForm.get("files")?.setValue([]),this.fileInput.nativeElement.value=""}setFormValues(t){if(console.log(t),this.requestForm.controls.notes.setValue(t.notes),this.requestForm.controls.client_id.setValue(t.client.id),this.requestForm.controls.service_id.setValue(t.service.id),t.conversion_urls)for(let u in t.conversion_urls)t.conversion_urls[u].forEach(n=>{this.conversionUrls.push(n)})}getListServices(){this.servicesService.getServicesList().subscribe({next:t=>{this.services=t.data},error:t=>{console.log(t)}})}getListClients(){this.clientsService.getClientsList().subscribe({next:t=>{this.clients=t.data},error:t=>{console.log(t)}})}updateRequest(){this.requestForm.valid&&this.requestService.updateRequest(this.request,{notes:this.requestForm.controls.notes.value||"",client_id:this.requestForm.controls.client_id.value||"",service_id:this.requestForm.controls.service_id.value||"",files:this.requestForm.controls.files.value||"",_method:"PATCH"}).subscribe({next:u=>{this.navigateToRequestList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u062d\u064a\u062b",3e3)},error:u=>{console.log("Failed to update Service Request:",u)}})}onSubmit(){this.requestForm.valid&&this.requestService.addRequest({notes:this.requestForm.controls.notes.value||"",client_id:this.requestForm.controls.client_id.value||"",service_id:this.requestForm.controls.service_id.value||"",files:this.requestForm.controls.files.value||""}).subscribe({next:u=>{this.navigateToRequestList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:u=>{console.log("Failed to add Service Request:",u)}})}static#e=this.\u0275fac=function(u){return new(u||r)(e.Y36(v.gz),e.Y36(b.An),e.Y36(h.K),e.Y36(v.F0),e.Y36(q.r),e.Y36(c.a),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-addrequest"]],viewQuery:function(u,n){if(1&u&&e.Gf(s,5),2&u){let p;e.iGM(p=e.CRH())&&(n.fileInput=p.first)}},standalone:!0,features:[e.jDz],decls:51,vars:17,consts:[[1,"container-fluid","py-5","px-1"],[1,"row","title-top","mb-3"],[1,"col-12","mb-3"],[1,"fw-bold","fs-2"],[1,"col-sm-6"],[1,"col-sm-6","text-end","back"],[1,"text-decoration-none",3,"routerLink"],[1,"fa-solid","fa-chevron-left","ms-2"],[1,"row","add-row"],[1,"col-12"],[1,"card","rounded-4"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group","col-md-6","mb-3"],["for","client_id",1,"form-label"],["name","client_id","id","client_id","formControlName","client_id",1,"form-select","form-select-lg"],[3,"value",4,"ngFor","ngForOf"],["class","ms-error",4,"ngIf"],["for","service_id",1,"form-label"],["name","service_id","id","service_id","formControlName","service_id",1,"form-select","form-select-lg"],["for","notes",1,"form-label"],[3,"control"],[1,"form-group","col-md-12","mb-3"],["for","files",1,"form-label"],["type","file","id","files","multiple","","accept","image/*",1,"form-control",3,"change"],["fileInput",""],[1,"mt-2"],["type","button",1,"btn","btn-danger",2,"background","red !important",3,"click"],[4,"ngIf","ngIfElse"],["editButton",""],[3,"value"],[1,"ms-error"],["class","mt-2",4,"ngFor","ngForOf"],["type","text","readonly","",1,"form-control","form-control-lg","mb-2",3,"value"],["target","_blank",1,"btn","btn-primary","mb-2",3,"href"],[1,"form-group","col-12","my-3"],[1,"btn","px-5","py-3",3,"disabled"],[1,"fa-solid","fa-circle-plus","me-2"],["type","button",1,"btn","px-5","py-3",3,"disabled","click"]],template:function(u,n){if(1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"\u0637\u0644\u0628 \u062e\u062f\u0645\u0627\u062a"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0641\u064a \u0628\u064a\u0627\u0646\u0627\u062a \u0637\u0644\u0628 \u062e\u062f\u0645\u0627\u062a"),e.qZA()(),e.TgZ(7,"div",4),e._UZ(8,"app-breadcrumb"),e.qZA(),e.TgZ(9,"div",5)(10,"a",6),e.ALo(11,"localize"),e._uU(12,"\u0631\u062c\u0648\u0639 "),e._UZ(13,"i",7),e.qZA()()(),e.TgZ(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11),e.YNc(18,T,2,0,"h5",12),e.YNc(19,U,2,0,"h5",12),e.TgZ(20,"form",13),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(21,"div",14)(22,"div",15)(23,"label",16),e._uU(24,"\u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e.TgZ(25,"select",17),e.YNc(26,J,2,2,"option",18),e.qZA(),e.YNc(27,Q,3,2,"div",19),e.qZA(),e.TgZ(28,"div",15)(29,"label",20),e._uU(30,"\u0627\u0644\u062e\u062f\u0645\u0629"),e.qZA(),e.TgZ(31,"select",21),e.YNc(32,O,2,2,"option",18),e.qZA(),e.YNc(33,M,3,2,"div",19),e.qZA(),e.TgZ(34,"div",15)(35,"label",22),e._uU(36,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),e.qZA(),e._UZ(37,"app-text-editor",23),e.YNc(38,k,3,2,"div",19),e.qZA(),e.TgZ(39,"div",24)(40,"label",25),e._uU(41,"\u0627\u0644\u0635\u0648\u0631"),e.qZA(),e.YNc(42,$,2,1,"ng-container",12),e.TgZ(43,"input",26,27),e.NdJ("change",function(m){return n.onFilesSelected(m)}),e.qZA(),e.TgZ(45,"div",28)(46,"button",29),e.NdJ("click",function(){return n.discardFiles()}),e._uU(47," \u062a\u062c\u0627\u0647\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0648\u0631 "),e.qZA()()(),e.YNc(48,z,5,1,"ng-container",30),e.YNc(49,j,3,1,"ng-template",null,31,e.W1O),e.qZA()()()()()()()),2&u){const p=e.MAs(50);e.xp6(10),e.Q6J("routerLink",e.VKq(15,H,e.lcZ(11,13,"/dashboard/requests"))),e.xp6(8),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("formGroup",n.requestForm),e.xp6(6),e.Q6J("ngForOf",n.clients),e.xp6(1),e.Q6J("ngIf",n.requestForm.controls.client_id.invalid&&(n.requestForm.controls.client_id.dirty||n.requestForm.controls.client_id.touched)),e.xp6(5),e.Q6J("ngForOf",n.services),e.xp6(1),e.Q6J("ngIf",n.requestForm.controls.service_id.invalid&&(n.requestForm.controls.service_id.dirty||n.requestForm.controls.service_id.touched)),e.xp6(4),e.Q6J("control",n.requestForm.controls.notes),e.xp6(1),e.Q6J("ngIf",n.requestForm.controls.notes.invalid&&(n.requestForm.controls.notes.dirty||n.requestForm.controls.notes.touched)),e.xp6(4),e.Q6J("ngIf",n.isEditMode&&n.conversionUrls.length>0),e.xp6(6),e.Q6J("ngIf",!n.isEditMode)("ngIfElse",p)}},dependencies:[o.ez,o.sg,o.O5,i.u5,i._Y,i.YN,i.Kr,i.EJ,i.JJ,i.JL,A.L,b.fQ,b.lO,i.UX,i.sg,i.u,v.Bz,v.rH,f.d]})}return r})();var V=l(1818),K=l(8034),w=l(7620),G=l(7700);const I=function(r,a){return[r,a]};function W(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e._UZ(8,"td",24),e.ALo(9,"safeHtml"),e.TgZ(10,"td",25)(11,"a",26),e.ALo(12,"localize"),e._UZ(13,"i",27),e._uU(14," \u0639\u0631\u0636"),e.qZA(),e.TgZ(15,"a",28),e.ALo(16,"localize"),e._UZ(17,"i",29),e._uU(18," \u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(19,"button",30),e.NdJ("click",function(){const p=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteRequest(p.id,p.service.name))}),e._UZ(20,"i",31),e._uU(21," \u062d\u0630\u0641 "),e.qZA()()()}if(2&r){const t=a.$implicit,u=a.index;e.xp6(2),e.Oqu(u+1),e.xp6(3),e.Oqu(t.client.code),e.xp6(2),e.hij(" ",t.service.name," "),e.xp6(1),e.Q6J("innerHTML",e.lcZ(9,6,t.notes),e.oJD),e.xp6(3),e.Q6J("routerLink",e.WLB(12,I,e.lcZ(12,8,"/dashboard/requests/view-request"),t.id)),e.xp6(4),e.Q6J("routerLink",e.WLB(15,I,e.lcZ(16,10,"/dashboard/requests/add-request"),t.id))}}function X(r,a){1&r&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}function te(r,a){if(1&r&&(e.TgZ(0,"div",48),e._UZ(1,"input",49),e.TgZ(2,"a",50),e._uU(3,"\u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641"),e.qZA()()),2&r){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.original),e.xp6(1),e.Q6J("href",t.original,e.LSH)}}function re(r,a){if(1&r&&(e.ynx(0),e.YNc(1,te,4,2,"div",47),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.conversionUrls)}}function oe(r,a){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"ul",13)(5,"li",14)(6,"button",15),e._UZ(7,"i",16),e._uU(8," \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629 "),e.qZA()(),e.TgZ(9,"li",14)(10,"button",17),e._UZ(11,"i",18),e._uU(12," \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644 "),e.qZA()(),e.TgZ(13,"li",14)(14,"button",19),e._UZ(15,"i",18),e._uU(16," \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0645\u0646\u0634\u0626 "),e.qZA()()()(),e.TgZ(17,"div",20)(18,"div",21)(19,"div",22)(20,"div",23)(21,"div",24)(22,"label",25),e._uU(23,"\u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e._UZ(24,"input",26),e.qZA(),e.TgZ(25,"div",24)(26,"label",27),e._uU(27,"\u0627\u0644\u062e\u062f\u0645\u0629"),e.qZA(),e._UZ(28,"input",28),e.qZA(),e.TgZ(29,"div",24)(30,"label",29),e._uU(31,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),e.qZA(),e._UZ(32,"div",30),e.ALo(33,"safeHtml"),e.qZA(),e.YNc(34,re,2,1,"ng-container",31),e.qZA()(),e.TgZ(35,"div",32)(36,"div",23)(37,"div",24)(38,"label",33),e._uU(39,"\u0631\u0645\u0632 \u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e._UZ(40,"input",34),e.qZA(),e.TgZ(41,"div",24)(42,"label",35),e._uU(43,"\u0627\u0644\u0648\u0638\u064a\u0641\u0629"),e.qZA(),e._UZ(44,"input",36),e.qZA(),e.TgZ(45,"div",37)(46,"label",38),e._uU(47,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),e.qZA(),e.TgZ(48,"textarea",39),e._uU(49),e.qZA()()()(),e.TgZ(50,"div",40)(51,"div",23)(52,"div",24)(53,"label",41),e._uU(54,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.qZA(),e._UZ(55,"input",42),e.qZA(),e.TgZ(56,"div",24)(57,"label",43),e._uU(58,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"),e.qZA(),e._UZ(59,"input",44),e.qZA(),e.TgZ(60,"div",24)(61,"label",45),e._uU(62,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"),e.qZA(),e._UZ(63,"input",46),e.qZA()()()()()()()()),2&r){const t=e.oxw();e.xp6(24),e.s9C("value",t.request.client.code),e.xp6(4),e.s9C("value",t.request.service.name),e.xp6(4),e.Q6J("innerHTML",e.lcZ(33,10,t.request.notes),e.oJD),e.xp6(2),e.Q6J("ngIf",t.conversionUrls.length>0),e.xp6(6),e.Q6J("value",t.request.client.code),e.xp6(4),e.Q6J("value",t.request.client.occupation),e.xp6(5),e.Oqu(t.request.client.address),e.xp6(6),e.Q6J("value",t.request.created_by_user.name),e.xp6(4),e.Q6J("value",t.request.created_by_user.email),e.xp6(4),e.Q6J("value",t.request.created_by_user.phone)}}const ue=function(r){return[r]},ne=[{path:"",component:C,children:[{path:"",component:(()=>{class r{constructor(t,u,n,p){this.dialog=t,this.router=u,this.localize=n,this.requestsServices=p,this.requests=[],this.searchQuery="",this.loading=!0}ngOnInit(){this.getRequestsList()}onPageChange(t){this.getRequestsList(t)}getRequestsList(t=1){this.loading=!0,this.requestsServices.getRequestList({page:t}).subscribe({next:u=>{this.requests=u.data,console.log(u.data),this.currentPage=u.pagination.current_page,this.totalPages=u.pagination.last_page,this.loading=!1},error:u=>{this.loading=!1,console.error("There was an error!",u)}})}deleteRequest(t,u){this.dialog.open(K.$,{width:"500px",data:{title:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 ${u}\u061f`}}).afterClosed().subscribe(p=>{p&&this.requestsServices.deleteRequest(t).subscribe({next:m=>{this.getRequestsList()},error:m=>{console.log("there was an error deleting Service:",m)}})})}static#e=this.\u0275fac=function(u){return new(u||r)(e.Y36(G.uw),e.Y36(v.F0),e.Y36(b.An),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-requests-list"]],standalone:!0,features:[e.jDz],decls:46,vars:7,consts:[[1,"container-fluid","py-5","px-1"],[1,"row","title-top","mb-3"],[1,"col-12","mb-3"],[1,"fw-bold","fs-2"],[1,"col-12"],[1,"row","list-row"],[1,"card","rounded-4"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-xl-3","col-lg-2","addNew","mb-2"],[1,"btn","w-100","py-3","rounded-4",3,"routerLink"],[1,"fa-solid","fa-circle-plus","me-2"],[1,"col-xl-7","col-lg-7","col-sm-8","searchINP","mb-2"],["type","search","placeholder","\u0627\u0644\u0628\u062d\u062b",1,"form-control","form-control-lg","rounded-3"],[1,"col-xl-2","col-lg-3","col-sm-4","text-center","filterBTN","mb-2"],[1,"btn","px-sm-4","px-5"],[1,"fa-solid","fa-sliders"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row"],[3,"currentPage","totalPages","pageChange"],[3,"innerHTML"],[1,"action","text-center"],[1,"btn","get",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"btn","edit",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","delete",3,"click"],[1,"fa-regular","fa-trash-can"],["colspan","4",1,"text-center"]],template:function(u,n){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"\u0627\u0644\u062e\u062f\u0645\u0627\u062a"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0641\u064a \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062e\u062f\u0645\u0627\u062a"),e.qZA()(),e.TgZ(7,"div",4),e._UZ(8,"app-breadcrumb"),e.qZA()(),e.TgZ(9,"div",5)(10,"div",4)(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"a",10),e.ALo(16,"localize"),e._UZ(17,"i",11),e._uU(18," \u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u062c\u062f\u064a\u062f "),e.qZA()(),e.TgZ(19,"div",12),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"div",14)(22,"button",15),e._UZ(23,"i",16),e._uU(24," \u062a\u0635\u0646\u064a\u0641 "),e.qZA()()()(),e.TgZ(25,"div",17)(26,"div",18)(27,"table",19)(28,"thead")(29,"tr")(30,"th"),e._uU(31,"\u062a\u0631\u0642\u064a\u0645"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"\u0643\u0648\u062f \u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"\u0627\u0633\u0645 \u0627\u0644\u062e\u062f\u0645\u0629"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"),e.qZA(),e._UZ(38,"th"),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,W,22,18,"tr",20),e.YNc(41,X,3,0,"tr",21),e.qZA()()()(),e.TgZ(42,"div",7)(43,"div",22)(44,"div",4)(45,"pagination",23),e.NdJ("pageChange",function(m){return n.onPageChange(m)}),e.qZA()()()()()()()()),2&u&&(e.xp6(15),e.Q6J("routerLink",e.lcZ(16,5,"/dashboard/requests/add-request")),e.xp6(25),e.Q6J("ngForOf",n.requests),e.xp6(1),e.Q6J("ngIf",0===n.requests.length&&!n.loading),e.xp6(4),e.Q6J("currentPage",n.currentPage)("totalPages",n.totalPages))},dependencies:[o.ez,o.sg,o.O5,V.Q,b.fQ,b.lO,v.Bz,v.rH,A.L,i.u5,w.z]})}return r})(),data:{breadcrumbs:[{label:"\u0627\u0644\u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",url:"/dashboard/requests"}]}},{path:":slug",component:E,data:{breadcrumbs:[{label:"\u0625\u0636\u0627\u0641\u0629 \u062e\u062f\u0645\u0629",url:"/dashboard/requests/add-request"}]}},{path:"add-request/:id",component:E,data:{breadcrumbs:[{label:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062e\u062f\u0645\u0629",url:"/dashboard/requests/add-request"}]}},{path:"view-request/:id",component:(()=>{class r{constructor(t,u){this.activatedRoute=t,this.requestService=u,this.conversionUrls=[]}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{const u=t.get("id");u&&this.requestService.getRequestById(u).subscribe({next:n=>{if(this.request=n.data,console.log(this.request),this.request.conversion_urls)for(let p in this.request.conversion_urls)this.request.conversion_urls[p].forEach(m=>{this.conversionUrls.push(m)})},error:n=>{console.error("Error fetching Service:",n)}})})}static#e=this.\u0275fac=function(u){return new(u||r)(e.Y36(v.gz),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-view-request"]],standalone:!0,features:[e.jDz],decls:15,vars:6,consts:[[1,"container-fluid","py-5","px-1"],[1,"row","title-top","mb-3"],[1,"col-12","mb-3"],[1,"fw-bold","fs-2"],[1,"col-sm-6"],[1,"col-sm-6","text-end","back"],[1,"text-decoration-none",3,"routerLink"],[1,"fa-solid","fa-chevron-left","ms-2"],["class","row add-row",4,"ngIf"],[1,"row","add-row"],[1,"col-12"],[1,"card","rounded-4"],[1,"card-body","border-b","py-2"],["id","pills-tab","role","tablist",1,"nav","nav-pills"],["role","presentation",1,"nav-item"],["id","mainInfo-tab","data-bs-toggle","pill","data-bs-target","#mainInfo","type","button","role","tab","aria-controls","mainInfo","aria-selected","true",1,"nav-link","active"],[1,"fa-regular","fa-user","me-2"],["id","clientInfo-tab","data-bs-toggle","pill","data-bs-target","#clientInfo","type","button","role","tab","aria-controls","clientInfo","aria-selected","false",1,"nav-link"],[1,"fa-solid","fa-user","me-2"],["id","createdByUserInfo-tab","data-bs-toggle","pill","data-bs-target","#createdByUserInfo","type","button","role","tab","aria-controls","createdByUserInfo","aria-selected","false",1,"nav-link"],[1,"card-body"],["id","pills-tabContent",1,"tab-content"],["id","mainInfo","role","tabpanel","aria-labelledby","mainInfo-tab","tabindex","0",1,"tab-pane","fade","show","active"],[1,"row"],[1,"form-group","col-md-6","mb-3"],["for","client_id",1,"form-label"],["name","client_id","id","client_id","disabled","",1,"form-control","form-control-lg",3,"value"],["for","service_id",1,"form-label"],["name","service_id","id","service_id","disabled","",1,"form-control","form-control-lg",3,"value"],["for","notes",1,"form-label"],[3,"innerHTML"],[4,"ngIf"],["id","clientInfo","role","tabpanel","aria-labelledby","clientInfo-tab","tabindex","0",1,"tab-pane","fade"],["for","clientCode",1,"form-label"],["type","text","id","clientCode","readonly","",1,"form-control","form-control-lg",3,"value"],["for","clientOccupation",1,"form-label"],["type","text","id","clientOccupation","readonly","",1,"form-control","form-control-lg",3,"value"],[1,"form-group","col-md-12","mb-3"],["for","clientAddress",1,"form-label"],["readonly","","id","clientAddress","rows","3",1,"form-control","form-control-lg"],["id","createdByUserInfo","role","tabpanel","aria-labelledby","createdByUserInfo-tab","tabindex","0",1,"tab-pane","fade"],["for","createdByUserName",1,"form-label"],["type","text","id","createdByUserName","readonly","",1,"form-control","form-control-lg",3,"value"],["for","createdByUserEmail",1,"form-label"],["type","text","id","createdByUserEmail","readonly","",1,"form-control","form-control-lg",3,"value"],["for","createdByUserPhone",1,"form-label"],["type","text","id","createdByUserPhone","readonly","",1,"form-control","form-control-lg",3,"value"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],["type","text","readonly","",1,"form-control","form-control-lg","mb-2",3,"value"],["target","_blank",1,"btn","btn-primary","mb-2",3,"href"]],template:function(u,n){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"\u0637\u0644\u0628 \u062e\u062f\u0645\u0627\u062a"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0641\u064a \u0628\u064a\u0627\u0646\u0627\u062a \u0637\u0644\u0628 \u062e\u062f\u0645\u0627\u062a"),e.qZA()(),e.TgZ(7,"div",4),e._UZ(8,"app-breadcrumb"),e.qZA(),e.TgZ(9,"div",5)(10,"a",6),e.ALo(11,"localize"),e._uU(12,"\u0631\u062c\u0648\u0639 "),e._UZ(13,"i",7),e.qZA()()(),e.YNc(14,oe,64,12,"div",8),e.qZA()),2&u&&(e.xp6(10),e.Q6J("routerLink",e.VKq(4,ue,e.lcZ(11,2,"/dashboard/requests"))),e.xp6(4),e.Q6J("ngIf",n.request))},dependencies:[o.ez,o.sg,o.O5,A.L,v.Bz,v.rH,b.fQ,b.lO,w.z]})}return r})(),data:{breadcrumbs:[{label:"\u0639\u0631\u0636 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062e\u062f\u0645\u0629",url:"/dashboard/requests/view-request"}]}}]}]},1818:(P,F,l)=>{l.d(F,{Q:()=>q});var o=l(5879),v=l(6223),e=l(6814);function C(c,g){if(1&c){const d=o.EpF();o.TgZ(0,"li",2)(1,"a",8),o.NdJ("click",function(){o.CHM(d);const s=o.oxw();return o.KtG(s.navigateTo(1))}),o._uU(2,"1"),o.qZA()()}}function A(c,g){1&c&&(o.TgZ(0,"li",2)(1,"a",9),o._uU(2,"..."),o.qZA()())}function b(c,g){if(1&c){const d=o.EpF();o.TgZ(0,"li",2)(1,"a",8),o.NdJ("click",function(){const T=o.CHM(d).$implicit,U=o.oxw();return o.KtG(U.navigateTo(T))}),o._uU(2),o.qZA()()}if(2&c){const d=g.$implicit,_=o.oxw();o.ekj("active",_.currentPage===d),o.xp6(2),o.Oqu(d)}}function i(c,g){1&c&&(o.TgZ(0,"li",2)(1,"a",9),o._uU(2,"..."),o.qZA()())}function f(c,g){if(1&c){const d=o.EpF();o.TgZ(0,"li",2)(1,"a",8),o.NdJ("click",function(){o.CHM(d);const s=o.oxw();return o.KtG(s.navigateTo(s.totalPages))}),o._uU(2),o.qZA()()}if(2&c){const d=o.oxw();o.xp6(2),o.Oqu(d.totalPages)}}const h={provide:v.JU,useExisting:(0,o.Gpc)(()=>q),multi:!0};let q=(()=>{class c{constructor(){this.pageChange=new o.vpe}navigateTo(d){this.pageChange.emit(d),this.scrollToTop()}ngOnInit(){}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}calculatePages(){const d=[];if(this.totalPages<=5)for(let s=1;s<=this.totalPages;s++)d.push(s);else{let s,T;this.currentPage<=Math.floor(2.5)?(s=1,T=5):this.currentPage+Math.floor(2.5)>=this.totalPages?(s=this.totalPages-5+1,T=this.totalPages):(s=this.currentPage-Math.floor(2.5),T=this.currentPage+Math.floor(2.5));for(let U=s;U<=T;U++)d.push(U)}return d}static#e=this.\u0275fac=function(_){return new(_||c)};static#t=this.\u0275cmp=o.Xpm({type:c,selectors:[["pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[o._Bn([h]),o.jDz],decls:15,vars:9,consts:[["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item","mx-2"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item mx-2",4,"ngIf"],["class","page-item mx-2",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"],[1,"page-link"]],template:function(_,s){1&_&&(o.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),o.NdJ("click",function(){return s.navigateTo(s.currentPage-1)}),o.TgZ(4,"span",4),o._uU(5,"\xab"),o.qZA()()(),o.YNc(6,C,3,0,"li",5),o.YNc(7,A,3,0,"li",5),o.YNc(8,b,3,3,"li",6),o.YNc(9,i,3,0,"li",5),o.YNc(10,f,3,1,"li",5),o.TgZ(11,"li",2)(12,"a",7),o.NdJ("click",function(){return s.navigateTo(s.currentPage+1)}),o.TgZ(13,"span",4),o._uU(14,"\xbb"),o.qZA()()()()()),2&_&&(o.xp6(2),o.ekj("disabled",1===s.currentPage),o.xp6(4),o.Q6J("ngIf",s.currentPage>3),o.xp6(1),o.Q6J("ngIf",s.currentPage>4),o.xp6(1),o.Q6J("ngForOf",s.calculatePages()),o.xp6(1),o.Q6J("ngIf",s.currentPage<s.totalPages-3),o.xp6(1),o.Q6J("ngIf",s.currentPage<s.totalPages-2),o.xp6(1),o.ekj("disabled",s.currentPage===s.totalPages))},dependencies:[e.ez,e.sg,e.O5],styles:[".pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return c})()}}]);